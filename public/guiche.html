<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Painel do Guichê - INDEA</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .logo-container {
      background-color: #1E2B78;
      padding: 1rem;
      border-radius: 8px;
    }
    .btn-azul-indea {
      background-color: #1E2B78;
      border-color: #1E2B78;
    }
    .btn-azul-indea:hover {
      background-color: #16225e;
      border-color: #16225e;
    }
  </style>
</head>
<body class="bg-light d-flex justify-content-center align-items-center vh-100">

  <div class="card shadow-lg p-4 text-center" style="max-width: 500px; width: 100%;">
    
    <!-- LOGO -->
    <div class="logo-container mb-4">
      <img src="logo-indea.png" alt="Logo INDEA" class="img-fluid" style="max-height: 120px;">
    </div>

    <h3 class="mb-4">Guichê - ULE Carlinda/MT</h3>

    

    <!-- Botões -->
    <div class="d-grid gap-2 mb-3">
      <h2 class="mt-4">Senha Atual: <span id="senhaAtual">---</span></span></h2>
      <button class="btn btn-azul-indea btn-lg text-white" onclick="novaSenha()">Chamar Nova Senha</button>
      <button class="btn btn-warning btn-lg" onclick="repetirSenha()">Repetir Senha</button>
      <button class="btn btn-danger btn-lg" onclick="voltarSenha()">Voltar Senha</button>

    </div>

    <!-- Input de início -->
    <div class="mb-3">
      <input type="number" id="inicio" placeholder="Definir senha inicial" class="form-control form-control-lg" />
    </div>

    <div class="d-grid">
      <button class="btn btn-primary btn-lg" onclick="definirInicio()">Definir Início</button>
    </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    function novaSenha() {
      fetch('/novaSenha').then(res => res.json());
      playClickSound();
      socket.emit('novaSenha', guiche); // Lembre de definir a variável 'guiche' se for usar socket
    }

    function repetirSenha() {
  fetch('/repetirSenha').then(res => res.json());
    }

    function voltarSenha() {
      fetch('/voltarSenha').then(res => res.json());
    }

    function definirInicio() {
      const inicio = document.getElementById('inicio').value;
      fetch('/setInicio', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ inicio })
      });
    }

    function playClickSound() {
      document.getElementById("clickSound").play();
    }
  </script>
  <script>
  const socket = io();

  socket.on('atualizarSenha', (senha) => {
    document.getElementById('senhaAtual').innerText = senha;
  });

  function novaSenha() {
    fetch('/novaSenha').then(res => res.json());
  }

  function voltarSenha() {
    fetch('/voltarSenha').then(res => res.json());
  }

  function definirInicio() {
    const inicio = document.getElementById('inicio').value;
    fetch('/setInicio', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ inicio })
    });
  }

</script>
</body>
</html>
